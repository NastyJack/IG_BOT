!function(){function e(e){Object.defineProperty(e,"__esModule",{value:!0})}function t(e,t,n){Object.defineProperty(e,t,{get:n,enumerable:!0})}var n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequired439,s=n("6UyrO"),a=n("4pwCs"),i=n("nIfN7"),o=n("7Mfds"),r=n("hQmIV"),u=n("6DHKG"),l=n("7xzSo"),c=n("3cqbl"),d=n("2JplJ"),f=n("2lIMO"),h=n("lPVHz"),g=n("3YoTT"),p=n("4RYcH"),m=n("6zDjW"),v=n("Saatc"),w=n("qnXVN"),b=n("23BIq"),S=n("4PGYP"),y=n("6oOtY"),k=n("3HMDR"),A=n("4QezY"),T=n("3u4tO"),C=n("4ZA4S"),I=n("uqDnl"),D=n("6PPN4"),U=n("6ExGy"),P=n("7rAex"),O=n("1g0wW"),_=n("5ZuLE"),x=n("47HXs"),E=n("3wQfI"),B=n("5NrOn"),F=n("367Kq"),M=n("7dHHw"),R=n("5zaO9"),H=n("hUK5n"),q=n("dfuZm"),L=n("23fUW"),N=n("2zvjG"),V=n("XcRe2"),j=n("4EOpL"),$=n("6FJnj"),G=n("6EJm9"),W=n("4Aaim"),z=n("6xgmF"),J=n("lUxTC"),K=n("520kD"),Y=n("1aIyT"),Q=n("5SoTn");({maxFakeId:2147483647,lastFakeId:0,fakeIdToCallback:{},init:function(){this._setupWorker("/js/hack-timer-worker.min.js")},_getFakeId:function(){do{this.lastFakeId===this.maxFakeId?this.lastFakeId=0:this.lastFakeId++}while(this.fakeIdToCallback.hasOwnProperty(this.lastFakeId));return this.lastFakeId},_setupWorker:function(e){const t={},n="hack-timer-worker:";let s;try{s=new Worker(e),window.setInterval=(e,n)=>{const a=this._getFakeId();return t[a]={callback:e,parameters:Array.prototype.slice.call(arguments,2)},s.postMessage({name:"setInterval",fakeId:a,time:n}),a},window.clearInterval=e=>{t.hasOwnProperty(e)&&(delete t[e],s.postMessage({name:"clearInterval",fakeId:e}))},window.setTimeout=(e,n)=>{const a=this._getFakeId();return t[a]={callback:e,parameters:Array.prototype.slice.call(arguments,2),isTimeout:!0},s.postMessage({name:"setTimeout",fakeId:a,time:n}),a},window.clearTimeout=e=>{t.hasOwnProperty(e)&&(delete t[e],s.postMessage({name:"clearTimeout",fakeId:e}))},s.onmessage=e=>{const s=e.data.fakeId;let a,i,o;if(t.hasOwnProperty(s)&&(a=t[s],o=a.callback,i=a.parameters,a.hasOwnProperty("isTimeout")&&a.isTimeout&&delete t[s]),"string"==typeof o)try{o=new Function(o)}catch(e){console.log(`${n} error parsing callback code string: `,error)}"function"==typeof o&&o.apply(window,i)},s.onerror=e=>{console.log(e)},console.log(`${n} initialisation succeeded`)}catch(e){console.log(`${n} initialisation failed`),console.log(e)}}}).init(),s(),a(),i(),o(),r(),u(),a(),l(),c(),d(),f(),h(),g();class X{constructor(e){this.defaultDelay=e,this.queue=Promise.resolve(),this.totalTasks=0,this.cleanupIndex=-1}addTask(e,t){const n=this.totalTasks++;return new Promise(((s,a)=>{this.queue=this.queue.then((async()=>{if(n<=this.cleanupIndex)t?s(await t()):s();else try{s(await e())}catch(e){a(e)}})),this.defaultDelay&&this.addDelay(this.defaultDelay)}))}addDelay(e){const t=this.totalTasks++;return new Promise((n=>{this.queue=this.queue.then((async()=>{t<=this.cleanupIndex||await g().default(e),n()}))}))}enqueueTask(e,t){const n=this.totalTasks++;return this.queue=this.queue.then((async()=>{if(n<=this.cleanupIndex)t&&await t();else try{await e()}catch(e){}})),this.defaultDelay&&this.enqueueDelay(this.defaultDelay),this}enqueueDelay(e){const t=this.totalTasks++;return this.queue=this.queue.then((async()=>{t<=this.cleanupIndex||await g().default(e)})),this}cleanup(){this.cleanupIndex=this.totalTasks-1}}function Z(e){return"[object Object]"===Object.prototype.toString.call(e)}p(),m(),v(),w(),b(),S(),y(),k(),f(),A(),T(),C(),S(),r();var ee="fb-api.fb-error",te="fb-api.failed-to-fetch-lsd-code",ne="fb-api.failed-to-fetch-state-code",se="fb-api.auth-window-closed-by-user",ae="fb-api.no-connected-fb-page",ie="fb-api.unknown",oe={isError:function(e,t=null){return e&&e[re]&&(!t||e.code===t)},checkAuth:de((async function e(t=!0){let n;try{C().fetcher.ignoreCache(),n=await C().fetcher.fetch("https://www.facebook.com/settings?tab=your_facebook_information")}catch(n){return t?e(!1):(r().sentryController.sendError("fbApi.checkAuth: failed","error",{details:n},{actor:"fb-api"}),!1)}if(n.redirected)return!1;return!0}),"check-auth"),logoutFcs:de((async function(){var e;C().fetcher.ignoreCache();const t=await C().fetcher.fetchText("https://business.facebook.com/creatorstudio"),n=(null===(e=t.match(/"logoutToken":"([^"]*)"/))||void 0===e?void 0:e[1])||null;n&&(C().fetcher.ignoreCache(),await C().fetcher.fetch(`https://business.facebook.com/logout.php?h=${n}`))}),"logout-fcs"),connectToFcs:de((async function(){var e,t;C().fetcher.ignoreCache();const n="https://business.facebook.com/creatorstudio",s=await C().fetcher.fetchText(n),a=/"LSD"[^"]*"token":"([^"]*)"/;let i=s;a.test(i)||(C().fetcher.ignoreCache(),i=await C().fetcher.fetchText(n));const o=(null===(e=i.match(a))||void 0===e?void 0:e[1])||null;if(!o)throw ue({code:te,html:i});const r=await ce({url:"https://business.facebook.com/business_user/oauth/state/?type=3",body:{lsd:o}}),u=null==r||null===(t=r.payload)||void 0===t?void 0:t.state;if(!u)throw ue({code:ne,lsdCode:o,stateResponse:r});const l=le(),c=await S().chromeBus.send("fb-api.auth-fcs",{appId:l,stateCode:u});if(!c)throw ue({code:se});await ce({url:"https://business.facebook.com/media_manager/instagram/oauthlink/update/",body:{code:c}})}),"connect-to-fcs"),connectToFcsWithCrossposting:de((async function(){var e,t;const n=await ce({url:"https://business.facebook.com/media_manager/instagram/oauth_state/",incognito:!0}),s=null==n||null===(e=n.payload)||void 0===e?void 0:e.state;if(!s)throw ue({code:ne,stateResponse:n});const a=le({withCrossposting:!0}),i=await S().chromeBus.send("fb-api.auth-fcs",{appId:a,stateCode:s,withCrossposting:!0});if(!i)throw ue({code:se});const o=await ce({url:"https://business.facebook.com/media_manager/instagram/oauthlink/update/",body:{code:i}});if(!(null==o||null===(t=o.payload)||void 0===t?void 0:t.adminedPageID))throw ue({code:ae})}),"connect-to-fcs-with-crossposting"),fcsDeletePost:de((async function(e){await ce({url:f().default("https://business.facebook.com/media/manager/instagram_media/delete/",{id:e})})}),"fcs-delete-post"),fcsSaveAsDraft:de((async function(e,{caption:t=null}={}){await ce({url:f().default("https://business.facebook.com/media/manager/instagram_media/edit/save/",{"edit_data[media_id]":e,"edit_data[save_as_draft]":!0,"edit_data[source_product_name]":"MEDIA_MANAGER",...t&&{"edit_data[caption]":t}})})}),"fcs-save-as-draft"),fcsSaveAsScheduled:de((async function(e,t,{caption:n=null}={}){await ce({url:f().default("https://business.facebook.com/media/manager/instagram_media/edit/save/",{"edit_data[media_id]":e,"edit_data[save_as_scheduled]":!0,"edit_data[scheduled_publish_time]":Math.round(t/1e3),"edit_data[source_product_name]":"MEDIA_MANAGER",...n&&{"edit_data[caption]":n}})})}),"fcs-save-as-scheduled"),fcsSaveAsPublished:de((async function(e,{caption:t=null}={}){await ce({url:f().default("https://business.facebook.com/media/manager/instagram_media/edit/save/",{"edit_data[media_id]":e,"edit_data[publish_now]":!0,"edit_data[source_product_name]":"MEDIA_MANAGER",...t&&{"edit_data[caption]":t}})})}),"fcs-save-as-published")};const re=Symbol("isFbApiError");function ue(e={}){return{...e,[re]:!0}}function le({withCrossposting:e=!1}={}){return e?"2216244465360995":"532380490911317"}async function ce({url:e,incognito:t=!1,body:n={}}){var s;C().fetcher.ignoreCache();const a=(null===(s=(await C().fetcher.fetchText("https://business.facebook.com/creatorstudio")).match(/"DTSGInitialData"[^"]*"token":"([^"]*)"/))||void 0===s?void 0:s[1])||null,i=(await C().fetcher.fetchText(e,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:A().default({__a:1,locale:"en_US",...a&&{fb_dtsg:a},...n})})).replace("for (;;);","")||"{}",o=JSON.parse(T().default(i)),r=o.payload||{};if(Array.isArray(r.error)&&r.error.length||Z(r.error)&&Object.keys(r.error).length||r.error_code||r.errorCode||r.errorMessage)throw ue({code:ee,payload:r});return o}function de(e,t){const n=async(...n)=>{try{return await e(...n)}catch(e){if(e&&e[re])throw e.method=t,e;throw r().sentryController.sendError(`fb-api.${t}`,"error",{details:e},{actor:"fb-api"}),ue({code:ie,method:t,details:e})}};return S().chromeBus.on(`fb-api.${t}`,(async(...e)=>{let t,s;try{t=await n(...e)}catch(e){s=e}return{result:t,error:s}})),n}I(),D(),U(),v(),P(),v(),I();const fe={init:function({parent:e}){this.parent=e,I().model.observe((e=>e.authStatus?e.authStatus.username:null),(()=>{this.updatePromocode()}),!1)},updatePro:async function(){await new Promise((e=>this.updatePromocode(e)))},updatePromocode:function(e){log("billing: updating promocode...");const{username:t,userId:n}=I().model.state.authStatus;if(t){const s={username:t,userId:n};if(v().env.options.collectBillingStats){const{followersCount:e,followingsCount:t,postsCount:a}=I().model.state.userDetails[n]||{};"number"==typeof e&&(s.followers=e),"number"==typeof t&&(s.followings=t),"number"==typeof a&&(s.posts=a)}this.parent.apiSender.send("/promo",{query:s}).then((t=>{if(!t||"ok"!==t.status)throw t;log(`  received promocode: ${JSON.stringify(t)}`);const n=t&&t.expiresAt;I().model.state.billing.promocode!==n&&I().transaction((e=>{e.billing.promocode=n})),this.parent.reply(e,n)})).catch((t=>{log(`  retrieving promocode failed: ${JSON.stringify(t)}`),this.parent.reply(e,I().model.state.billing.promocode)}))}else log("  no username to retrieve promocode for"),this.parent.reply(e,I().model.state.billing.promocode);return!!e}};a(),v(),I();const he={init:function({parent:e}){this.parent=e,I().model.observe((e=>e.billing.trial),(e=>{this.updateCookie(e)}),!1)},updatePro:async function(){await new Promise((e=>this.updateTrial(e)))},updateTrial:async function(e){log("billing: updating trial period...");const t=I().model.state.billing.trial,n=await this._getCookie({name:"tsd"});if(this._isCookieEmpty(n))return void this.parent.reply(e,t);const s=this._mergeTrialValues(t,n);s.installedOn||(s.installedOn=Date.now()),a().default.isEqual(t,s)||I().transaction((e=>{e.billing.trial=s})),a().default.isEqual(n,s)||this._setCookie({name:"tsd",value:s}),this.parent.reply(e,s)},updateCookie:async function(e){const t=await this._getCookie({name:"tsd"});this._isCookieEmpty(t)||(e=this._mergeTrialValues(t,e)),a().default.isEqual(t,e)||this._setCookie({name:"tsd",value:e})},_isCookieEmpty:function(e){return!e||1===Object.keys(e).length},_mergeTrialValues:function(e,t){const n={...e,...t};n.installedOn>e.installedOn&&(n.installedOn=e.installedOn);for(const t in n)(e[t]||0)>(n[t]||0)&&(n[t]=e[t]||0);return n},_getCookie:async function({name:e}){return new Promise((t=>{chrome.cookies.getAll({url:`https://${v().env.options.domain}`},(n=>{let s=(n||[]).filter((t=>t.name===e))[0]||{value:""};s=s.value;try{s=atob(s)}catch(e){}try{s=JSON.parse(s)}catch(e){s=null}t(s)}))}))},_setCookie:async function({name:e,value:t}){const n=Math.round(Date.now()/1e3),s=n+31536e4>2147483647?n+31536e4:2147483647;return new Promise((n=>{chrome.cookies.set({name:e||"cookie",value:btoa(JSON.stringify(t)),url:`https://${v().env.options.domain}`,path:"/",httpOnly:!1,secure:!1,storeId:"0",domain:v().env.options.domain,sameSite:"strict",expirationDate:s},n)}))}};I(),r();const ge={init:function({parent:e}){this.parent=e,chrome.runtime.onMessage.addListener(((e,t,n)=>"fspring.subscription-success"===e.name?this.onFSpringSubscriptionSuccess(e,n):"fspring.subscription-failure"===e.name?this.onFSpringSubscriptionFailure(e,n):void 0)),chrome.runtime.onMessage.addListener(((e,t,n)=>"update-fspring-status"===e.name&&this.updateFSpringStatus(n))),I().model.observe((e=>e.authStatus?e.authStatus.username:null),(()=>{this.recordUsernames()}),!0),I().model.observe((e=>e.billing&&e.billing.account?e.billing.account.token:null),(()=>{this.recordUsernames()}),!1),I().model.observe((e=>e.billing&&e.billing.account?e.billing.account.token:null),(()=>{this.updateFSpringStatus()}),!1)},recordUsernames:function(){const{billing:e,authStatus:t}=I().model.state,n=t.username;if(!n)return;const s=e.account?e.account.token:null;if(!s)return;if(-1!==e.recordedUsernames.indexOf(n))return;log("billing: updating associated fspring account usernames...");const a={usernames:[n]};this.parent.apiSender.send("/auth/record-usernames",{body:a,token:s}).then((()=>{I().transaction((e=>{e.billing.recordedUsernames=[...e.billing.recordedUsernames,n]}))})).catch((()=>{}))},updatePro:async function(){return new Promise((e=>this.updateFSpringStatus(e)))},updateFSpringStatus:function(e){log("billing: updating fspring status...");const{billing:t}=I().model.state,n=t.account?t.account.token:null;if(n){const t="/fspring/data";this.parent.apiSender.send(t,{token:n}).then((t=>{if(!t||"ok"!==t.status)throw t;I().transaction((e=>{e.billing.subscriptions=t.subscriptions||{},e.billing.products=t.products||{},e.billing.orders=t.orders||[]})),this.parent.reply(e,I().model.state.billing)})).catch((n=>{"TypeError"===n.name&&"Failed to fetch"===n.message||("forbidden"===n.status||"unauthorized"===n.status||"account-not-found"===n.status||"account-is-not-active"===n.status?I().transaction((e=>{e.billing.account.email=null,e.billing.account.token=null})):r().sentryController.sendError(`Unexpected API error at ${t}`,"error",{error:n},{actor:"auth"})),this.parent.reply(e,I().model.state.billing)}))}else I().transaction((e=>{e.billing.optimistic=null,e.billing.subscriptions={},e.billing.products={},e.billing.orders=[]})),this.parent.reply(e,I().model.state.billing);return!!e},onFSpringSubscriptionSuccess:function(e,t){log("billing: handling fspring subscription success..."),I().transaction((e=>{e.billing.optimistic={on:Date.now(),plan:e.billing.purchasingPlan.id},e.billing.purchasingPlan=null}));const n=JSON.stringify({subscriptions:I().model.state.billing.subscriptions,products:I().model.state.billing.products,orders:I().model.state.billing.orders}),s=Date.now();let a=3e3;const i=()=>{log("billing: polling server for status update..."),I().model.state.billing.optimistic&&this.updateFSpringStatus((e=>{const t=Date.now();t-s>36e5?I().transaction((e=>{e.billing.optimistic=null})):(e=JSON.stringify({subscriptions:e.subscriptions,products:e.products,orders:e.orders}),n===e?(a=t-s>3e4?6e5:3e3,setTimeout(i,a)):I().transaction((e=>{e.billing.optimistic=null})))}))};return setTimeout(i,a),!!t},onFSpringSubscriptionFailure:function(e,t){return log("billing: handling fspring subscription failure..."),I().transaction((e=>{e.billing.purchasingPlan=null})),!!t}},pe={init:function(){this.apiSender=new(P().Sender)({urlPrefix:v().env.options.apiUrl}),fe.init({parent:this}),he.init({parent:this}),ge.init({parent:this});return chrome.alarms.create("update-pro",{delayInMinutes:1440,periodInMinutes:1440}),chrome.alarms.onAlarm.addListener((e=>{"update-pro"===e.name&&this.updatePro()})),chrome.runtime.onMessage.addListener(((e,t,n)=>"update-pro"===e.name&&this.updatePro())),this},updatePro:async function(){await Promise.all([fe.updatePro(),he.updatePro(),ge.updatePro()])},reply:function(e,t){if(e)try{e(t)}catch(e){}}};r(),a(),v(),D(),I(),P(),S(),c(),I(),O(),k(),C(),b(),S(),_(),m(),d(),I(),C(),x(),k(),b(),S(),r(),m(),E(),d(),B(),I(),C(),w(),k(),S(),D(),m(),I(),S(),D(),F();var me={init:function(){S().chromeBus.on("cleanup.clean-up-state",(()=>{const e=Date.now();return ve(e),e}))},cleanUpState:ve};function ve(e){const t=D().getTemplateUserState();I().transaction((n=>{var s;n.cleanupId=e,n.dm.badgeText="",n.dm.ghostModeFailed=!1,n.reels.creating=!1,n.igView.creationCardShown=!1,n.igView.fullscreenWidth=460,n.billing.purchasingPlan=null,n.tagAssist.shown=!1,n.tagAssist.query="",n.tagAssist.searching=!1,n.tagAssist.errorCode=null,n.tagAssist.selectedTabId="search",n.tagAssist.selectedGroupId="medium",n.tagAssist.igSelectedTags=[],n.tagAssist.fcsSelectedTags=[],n.tagAssist.sidebarSelectedTags=[],n.tagAssist.sidebarSelectedTagsAsText="",n.tagAssist.ladderEngagementSort=null,n.tagAssist.summaryEngagementSort="descending",n.tagAssist.ladderPostCountSort=null,n.tagAssist.summaryPostCountSort=null,n.tagAssist.ladder=null,n.tagAssist.ladderLoadingTags=[],n.tagAssist.newCollection.name="",n.tagAssist.newCollection.text="",n.tagAssist.newCollection.showForm=!1,n.tagAssist.collectionsLoadingTags=[];for(const e of n.tagAssist.collections)e.editing=!1,e.editName="",e.editText="";const a=n.tagAssist.accountStats[n.authStatus.userId]||null,i=(null==a?void 0:a.mostUsedTags)||[];i.length>0&&(n.tagAssist.searching=!0,n.tagAssist.query=i.slice(0,2).map((e=>`#${e}`)).join(" ")),Object.assign(n.coverAssist,F().default),n.schedule.loading=!0,n.schedule.fcsError=null,n.schedule.fcsFailed=!1,n.schedule.isErrorShown=!1,n.schedule.isUpsellShown=!1,n.schedule.isDraggingPost=!1,n.schedule.showTagAssist=!1,n.schedule.addingFiles=!1,n.schedule.fileUploadErrors=[],n.schedule.posts=n.schedule.posts.filter((e=>"saving"!==e.saveStatus)).filter((e=>"deleting"!==e.saveStatus)),n.schedule.posts.forEach((e=>{e.preview=null})),n.schedule.fallback.isFailedToReconnect=!1,n.schedule.fallback.isRetryingFbConnection=!1,n.schedule.fallback.hideSwitchToFallbackButton=!1,n.schedule.navigation.isOpen=!1,n.schedule.navigation.selectedTabId=null,n.schedule.navigation.withBackToCalendarButton=!1,n.schedule.fcsSetup.checking=!0,n.schedule.fcsSetup.connected=!1,n.schedule.fcsSetup.connecting=!1,n.schedule.fcsSetup.showPanel=!1,n.schedule.fcsSetup.errorCode=null,n.schedule.fcsSetup.attempted=!1,n.schedule.fcsSetup.failed=!1,n.schedule.fcsSetup.newApi=!0,n.schedule.calendar.periodStart=null,n.schedule.dateDialog=M().default(n),n.schedule.addCard=t.schedule.addCard,n.bulk=t.bulk;const o=Date.now()+m().DAY,r=(null===(s=n.schedule.timeSlots[0])||void 0===s?void 0:s.time)||null;n.bulk.dateDialog.week.selectedSlotTime=r,n.bulk.dateDialog.calendar.periodStart=o,n.bulk.dateDialog.calendar.selectedDay=o,n.bulk.dateDialog.calendar.selectedSlotTime=r,n.bulk.dateDialog.startingDay.periodStart=o,n.bulk.dateDialog.startingDay.selectedDay=o}))}R(),m(),S(),O();var we={init:async function(){return void await O().idbController.delete("image-proxy.cache");ye=await O().idbController.get("image-proxy.cache")||{},Se.resolve(),S().chromeBus.on("image-proxy.save",ke),S().chromeBus.on("image-proxy.cache-item-used",Ae)},save:ke};const be=15*m().SECOND,Se=R().default();let ye;async function ke(e){}async function Ae(e){ye[e]&&(ye[e].lastUsedAt=Date.now(),Te())}function Te(){const e=Te;clearTimeout(e.timeout),e.timeout=setTimeout((async()=>{O().idbController.set("image-proxy.cache",ye)}),be)}H(),S();var Ce={getVersion:function(){if(void 0===Ie){const e=/Chrome\/([0-9.]+)/.exec(window.navigator.userAgent)[1];Ie=e?Number(e.split(".")[0]):-1}return Ie}};let Ie;var De={init:function(){Pe=-1,S().chromeBus.on("core-web-request.popup-tab-id",(e=>{Ue=e}))},watch:function(e,t){chrome.webRequest.onBeforeRequest.addListener((e=>{let n=null;const s=new URL(e.url).host;return t({details:e,isBeforeRequest:!0,isRequest:!1,isResponse:!1,fromExtension:_e(e),checkUrl:function(t){return e.url.includes(t)},checkHost:function(e){return s.includes(e)},redirect:function(e){n={redirectUrl:e}},getHeader:function(){},setHeader:function(){}}),n}),{urls:e},["blocking"]),chrome.webRequest.onBeforeSendHeaders.addListener((e=>{Oe(e.requestHeaders);const n=new URL(e.url).host;return t({details:e,isBeforeRequest:!1,isRequest:!0,isResponse:!1,fromExtension:_e(e),redirect:function(){},checkUrl:function(t){return e.url.includes(t)},checkHost:function(e){return n.includes(e)},getHeader:function(t){return t=t.toLowerCase(),e.requestHeaders.find((e=>e.name===t))},setHeader:function(t,n){t=t.toLowerCase(),e.requestHeaders=e.requestHeaders.filter((e=>e.name!==t)),e.requestHeaders.push({name:t,value:n})},removeHeader:function(t){t=t.toLowerCase(),e.requestHeaders=e.requestHeaders.filter((e=>e.name!==t))}}),{requestHeaders:e.requestHeaders}}),{urls:e},Ce.getVersion()<72?["blocking","requestHeaders"]:["blocking","requestHeaders","extraHeaders"]),chrome.webRequest.onHeadersReceived.addListener((e=>{Oe(e.responseHeaders);const n=new URL(e.url).host;return t({details:e,isBeforeRequest:!1,isRequest:!1,isResponse:!0,fromExtension:_e(e),redirect:function(){},checkUrl:function(t){return e.url.includes(t)},checkHost:function(e){return n.includes(e)},getHeader:function(t){return t=t.toLowerCase(),e.responseHeaders.find((e=>e.name===t))},setHeader:function(t,n){t=t.toLowerCase(),e.responseHeaders=e.responseHeaders.filter((e=>e.name!==t)),e.responseHeaders.push({name:t,value:n})},removeHeader:function(t){t=t.toLowerCase(),e.responseHeaders=e.responseHeaders.filter((e=>e.name!==t))}}),{responseHeaders:e.responseHeaders}}),{urls:e},Ce.getVersion()<72?["blocking","responseHeaders"]:["blocking","responseHeaders","extraHeaders"])}};let Ue=null,Pe=null;function Oe(e){for(const t of e)t.name=t.name.toLowerCase()}function _e(e){return e.tabId===Ue||e.tabId===Pe}const xe=H().default();var Ee={init:function(){De.watch(["https://*.onfastspring.com/*","https://*.instagram.com/*","https://*.facebook.com/*","https://*.inssist.com/*"],Me)},onRequest:xe};let Be,Fe;function Me({details:e,isBeforeRequest:t,isRequest:n,isResponse:s,fromExtension:a,redirect:i,getHeader:o,setHeader:r,removeHeader:u,checkUrl:l,checkHost:c}){var d,f,h;if(xe(arguments[0]),t&&c("app.inssist.com")&&i(chrome.runtime.getURL("/inssist.html")),t&&c("instagram.com")&&l("service-worker-")&&i(chrome.runtime.getURL("/js/ig-service-worker.js")),n&&a&&(c("instagram.com")||c("facebook.com")||c("fastspring.com"))){const t=o("origin");if(!t||(null==t?void 0:t.value.startsWith("chrome-extension"))){r("origin",new URL(e.url).origin)}}n&&c("instagram.com")&&l("/direct/inbox")&&(null===(d=e.initiator)||void 0===d?void 0:d.startsWith(`chrome-extension://${chrome.runtime.id}`))&&(Be=e.frameId);const g=n&&c("instagram.com")&&"POST"===e.method&&(l("/accounts/login/ajax/")||l("/one_tap_web_login/")),p=n&&c("instagram.com")&&(a||l("/api/v1/"))&&!l("/tv/upload")&&e.tabId!==Be;if(g||p){let e="Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1";l("/api/v1/")&&(e=`${e} Instagram 72.0.0.21.98`),r("user-agent",e)}if(s&&(c("instagram.com")||c("facebook.com")||c("inssist.com")||c("onfastspring.com"))&&(e.responseHeaders=e.responseHeaders.filter((e=>"x-frame-options"!==e.name))),s&&(c("instagram.com")||c("facebook.com")||c("inssist.com")||c("onfastspring.com"))&&(e.responseHeaders=e.responseHeaders.filter((e=>"content-security-policy"!==e.name&&"content-security-policy-report-only"!==e.name))),s&&c("facebook.com")&&(l("/confirmemail.php")||l("/home.php"))&&(null===(f=e.initiator)||void 0===f?void 0:f.includes("business.facebook.com"))&&(r("access-control-allow-origin","https://business.facebook.com"),r("access-control-allow-credentials","true")),s&&c("facebook.com")&&l("/home.php")&&(null===(h=e.initiator)||void 0===h?void 0:h.includes("web.facebook.com"))&&(r("access-control-allow-origin","https://web.facebook.com"),r("access-control-allow-credentials","true")),s&&c("instagram.com")&&r("access-control-expose-headers","*, Authorization"),s&&c("instagram.com")){const e=o("x-ig-set-www-claim");e&&Fe!==e.value&&(Fe=e.value)}if(n&&c("instagram.com")){const e=o("x-ig-www-claim");e&&"auto"===e.value&&(Fe?r("x-ig-www-claim",Fe):u("x-ig-www-claim"))}}var Re={init:async function(){await async function(){if("username"in I().model.state.authStatus)return;C().fetcher.ignoreCache();const e=await k().igApi.fetchViewerInfo();if(e.error)return;const t=e.result||null;I().transaction((e=>{e.authStatus.userId=(null==t?void 0:t.userId)||null,e.authStatus.username=(null==t?void 0:t.username)||null,e.authStatus.fullName=(null==t?void 0:t.fullName)||null,e.authStatus.email=(null==t?void 0:t.email)||null,e.authStatus.avatarUrl=(null==t?void 0:t.avatarUrl)||null,e.authStatus.isLoggedIn=!!t,e.authStatus.isMobileSession=(null==t?void 0:t.isMobileSession)||!1,e.authStatus.cookies=(null==t?void 0:t.cookies)||{igSessionId:null,fb:[]}})),await Je()}(),function(){let e;chrome.cookies.onChanged.addListener((({cookie:t,removed:n})=>{qe||I().model.state.schedule.fcsSetup.connecting||".instagram.com"===t.domain&&"sessionid"===t.name&&(clearTimeout(e),e=setTimeout((()=>{Ne({isSettingSessionId:!n})})))}))}(),function(){let e;Ee.onRequest((({details:n,isResponse:s,checkHost:a})=>{if(s&&a("facebook.com")){!!n.responseHeaders.find((e=>"set-cookie"===e.name))&&(clearTimeout(e),e=setTimeout(t))}}));const t=async()=>{const e=await d().default(chrome.cookies.getAll,{domain:".facebook.com"});I().transaction((t=>{t.authStatus.cookies.fb=e}))}}(),S().chromeBus.on("auth.set-ig-initial-url",Ve),S().chromeBus.on("auth.login",je),S().chromeBus.on("auth.logout",$e),S().chromeBus.on("auth.refresh-user",Ne),S().chromeBus.on("auth.toggle-session-watcher",ze),chrome.runtime.onMessage.addListener(((e,t,n)=>"update-user"===e.name&&Le()))},updateUser:Le,refreshUser:Ne,clearFbCookies:Ge};let He=null,qe=!1;async function Le(e=!1){log("auth-controller: updating user id...");!await Ne()&&e&&chrome.tabs.update({url:w().ig.login.url})}async function Ne({isSettingSessionId:e=!1}={}){const t=Ne,n=E().generate();t.requestId=n,C().fetcher.ignoreCache();const s=await k().igApi.fetchViewerInfo();if(t.requestId!==n)return;if(s.error)return;const a=s.result||null,i=a&&I().model.state.authStatus.userId===a.userId;return a&&we.save(a.avatarUrl),I().transaction((t=>{if(a&&t.authStatus.userId===a.userId)return t.authStatus.username=a.username,t.authStatus.avatarUrl=a.avatarUrl,t.multiaccount.selectedUserId=a.userId,void(e&&(t.authStatus.isMobileSession=!0));if(a){const e=t.multiaccount.userIds;t.multiaccount.addingNewAccount?t.multiaccount.addingNewAccount=!1:t.authStatus.isLoggedIn||B().default(e,t.multiaccount.selectedUserId),e.includes(a.userId)||e.push(a.userId),t.multiaccount.selectedUserId=a.userId}if(t.authStatus.userId){t.userStates[t.authStatus.userId]={};const e=D().getTemplateUserState();for(const n in e)t.userStates[t.authStatus.userId][n]=t[n];t.userStates[t.authStatus.userId].authStatus.isMobileSession=!1}let n=null;a&&t.userStates[a.userId]?(n=t.userStates[a.userId],delete t.userStates[a.userId]):n=D().getTemplateUserState(),n.authStatus.userId=(null==a?void 0:a.userId)||null,n.authStatus.username=(null==a?void 0:a.username)||null,n.authStatus.avatarUrl=(null==a?void 0:a.avatarUrl)||null,n.authStatus.isLoggedIn=!!a,e&&(n.authStatus.isMobileSession=!0),Object.assign(t,n)})),await Je(),i||(S().chromeBus.send("iframe-bus","ig.clear-and-show-spinner"),a?He?S().chromeBus.send("iframe-bus","ig.hard-go",He):(me.cleanUpState(),S().chromeBus.send("iframe-bus","ig.refresh")):S().chromeBus.send("iframe-bus","ig.hard-go","/accounts/login/"),S().chromeBus.send("iframe-bus","dm.refresh"),S().chromeBus.send("iframe-bus","schedule.fcs-refresh-page")),He=null,S().chromeBus.send("auth.refreshed"),a}function Ve(e){He=e}async function je(e){var t;const n=null===(t=I().model.state.userStates[e])||void 0===t?void 0:t.authStatus;if(n){ze(!1);try{await Ge();for(const e of n.cookies.fb)await d().default(chrome.cookies.set,{url:"https://*.facebook.com",name:e.name,value:e.value,domain:e.domain,path:e.path,secure:e.secure,httpOnly:e.httpOnly,sameSite:e.sameSite,storeId:e.storeId,expirationDate:e.expirationDate});await We(),await d().default(chrome.cookies.set,{url:"https://*.instagram.com",name:"sessionid",value:n.cookies.igSessionId,domain:".instagram.com",path:"/",secure:!0,httpOnly:!1,sameSite:"no_restriction",expirationDate:Math.round((Date.now()+365*m().DAY)/1e3)})}catch(e){console.error(e)}ze(!0),setTimeout((()=>{Ne({isSettingSessionId:!1})}))}else console.error("auth status not found",{userId:e})}async function $e(){await Ge(),await We()}async function Ge(){const e=await d().default(chrome.cookies.getAll,{domain:".facebook.com"});for(const t of e)await d().default(chrome.cookies.remove,{url:"https://*.facebook.com",name:t.name})}async function We(){await d().default(chrome.cookies.remove,{url:"https://*.instagram.com/*",name:"sessionid"})}function ze(e){qe=!e}async function Je(){const e=await d().default(chrome.cookies.get,{url:"https://*.instagram.com",name:"sessionid"}),t=await d().default(chrome.cookies.getAll,{domain:".facebook.com"});I().transaction((n=>{n.authStatus.cookies.igSessionId=(null==e?void 0:e.value)||null,n.authStatus.cookies.fb=t}))}q();var Ke={init:function(){S().chromeBus.on("schedule.connect-to-fcs",Ye),S().chromeBus.on("schedule.connect-to-fcs-with-crossposting",Qe)}};async function Ye(){var e;I().transaction((e=>{e.schedule.fcsSetup.connecting=!0})),await Re.clearFbCookies(),C().fetcher.ignoreCache();const t=(null===(e=(await C().fetcher.fetchText("https://business.facebook.com/creatorstudio")).match(/js_datr","([^"]*)"/))||void 0===e?void 0:e[1])||null;await d().default(chrome.cookies.set,{url:"https://*.facebook.com",name:"datr",value:t,domain:".facebook.com",path:"/",secure:!0,httpOnly:!0,sameSite:"no_restriction",storeId:"0",expirationDate:Math.round((Date.now()+365*m().DAY)/1e3)}),C().fetcher.ignoreCache();const n=(await k().igApi.fetchViewerInfo()).result;if(n||I().transaction((e=>{e.schedule.fcsSetup.connecting=!1,e.schedule.fcsSetup.errorCode=q().default.failedToFetchViewerInfo})),n.isProfessionalAccount){try{await oe.connectToFcs()}catch(e){if(I().transaction((e=>{e.schedule.fcsSetup.connecting=!1})),oe.isError(e,se))return void Re.refreshUser();let t;return t=oe.isError(e)?e.code:q().default.unknown,I().transaction((e=>{e.schedule.fcsSetup.errorCode=t})),r().sentryController.sendError(`schedule setup: ${t}`,"error",e,{actor:"schedule"}),void x().gaController.sendEvent("user","schedule:setup-connection-error",t)}I().transaction((e=>{e.schedule.fcsSetup.attempted=!0,e.schedule.fcsSetup.connecting=!1,e.schedule.fcsSetup.showPanel=!1,e.schedule.loading=!0})),await Re.refreshUser(),S().chromeBus.send("iframe-bus","schedule.fcs-refresh-page"),x().gaController.sendEvent("user","schedule:setup-connection-success")}else I().transaction((e=>{e.schedule.fcsSetup.connecting=!1,e.schedule.fcsSetup.errorCode=q().default.nonProfessionalAccount}))}async function Qe(){I().transaction((e=>{e.schedule.fcsSetup.connecting=!0}));const e=await oe.checkAuth();if(e){e&&await oe.logoutFcs();try{await oe.connectToFcsWithCrossposting()}catch(e){if(I().transaction((e=>{e.schedule.navigation.isOpen=!1,e.schedule.fcsSetup.connecting=!1})),oe.isError(e,se))return void Re.refreshUser();let t;return oe.isError(e,ae)?(t=q().default.noConnectedFbPage,S().chromeBus.send("iframe-bus","schedule.fcs-refresh-page")):t=oe.isError(e)?e.code:q().default.unknown,I().transaction((e=>{e.schedule.fcsSetup.showPanel=!0,e.schedule.fcsSetup.errorCode=t})),r().sentryController.sendError(`schedule crossposting setup: ${t}`,"error",e,{actor:"schedule"}),I().transaction((e=>{e.schedule.loading=!0})),b().eventBus.send("schedule.update-ig-posts"),void x().gaController.sendEvent("user","schedule:setup-crossposting-error",t)}I().transaction((e=>{e.schedule.navigation.isOpen=!1,e.schedule.navigation.selectedTabId=null,e.schedule.fcsSetup.connecting=!1,e.schedule.fcsSetup.showPanel=!1,e.schedule.loading=!0})),await Re.refreshUser(),S().chromeBus.send("iframe-bus","schedule.fcs-refresh-page"),x().gaController.sendEvent("user","schedule:setup-crossposting-success")}else I().transaction((e=>{e.schedule.navigation.isOpen=!1,e.schedule.fcsSetup.connecting=!1,e.schedule.fcsSetup.showPanel=!0,e.schedule.fcsSetup.errorCode=q().default.fbLoginRequired}))}c(),C(),O(),I(),S(),L(),N();var Xe={init:function(){!function(){const e={};let t=!1,n=!1;async function s(){if(t)return void(n=!0);t=!0;const a={};let i=0;for(const t of L().default.getPosts()){const s=I().model.state,o=t.id,r=s.schedule.posts.find((e=>e.id===o));if(!r)continue;if("fcs"!==r.source)continue;if(e[r.id])continue;if(i+=1,i>9){n=!0;continue}const u=`schedule.fcs-post-preview:${r.id}`,l=await c().default((()=>O().idbController.get(u)));if(l){e[r.id]=URL.createObjectURL(l);continue}let d;try{const e=await C().fetcher.fetch(r.image,{credentials:"omit"}),t=await e.blob();d=await N().default(t)}catch(e){console.error(e);continue}await c().default((()=>O().idbController.set(u,d.blob))),a[r.id]=d.averageColor,e[r.id]=URL.createObjectURL(d.blob)}I().transaction((t=>{const n=t.schedule.posts.filter((e=>"fcs"===e.source));for(const t of n)t.preview=e[t.id];for(const e in a){const t=n.find((t=>t.id===e));t&&(t.imageAvgColor=a[e])}})),t=!1,n&&(n=!1,s())}I().model.observe((e=>L().default.getPosts().filter((e=>"fcs"===e.source)).map((e=>e.id)).join("-")),s),S().chromeBus.on("popup.start",(()=>{for(const t in e)URL.revokeObjectURL(e[t]),delete e[t];s()}))}()}};m(),S(),r();var Ze={init:function(){!function(){let e;S().chromeBus.on("schedule.upload-99",(t=>{clearTimeout(e),e=setTimeout((()=>{r().sentryController.sendError("Upload stuck at 99.9%","error",{debugData:t},{actor:"schedule"})}),20*m().SECOND)})),S().chromeBus.on("schedule.upload-100",(()=>{clearTimeout(e)}))}()}};var et={init:function(){Ke.init(),Xe.init(),Ze.init(),async function(){S().chromeBus.on("popup.start",(async()=>{const e=[I().model.state,...Object.values(I().model.state.userStates)],t=e.map((e=>e.schedule.posts)).flat().filter((e=>"fcs"===e.source)).map((e=>e.id.toString())),n=e.map((e=>e.schedule.posts)).flat().filter((e=>"local"===e.source)).map((e=>e.id.toString())),s=await O().idbController.getAllKeys();for(const e of s)if(e.startsWith("schedule.fcs-post-preview:")){const n=e.split(":")[1];if(t.includes(n))continue;await c().default((()=>O().idbController.delete(e)))}else if(e.startsWith("schedule.local-post:")){const t=e.split(":")[1];if(n.includes(t))continue;await c().default((()=>O().idbController.delete(e)))}}))}(),S().chromeBus.on("schedule.update-ig-posts",tt),b().eventBus.on("schedule.update-ig-posts",tt)},getReport:async function(){return await S().chromeBus.send("iframe-bus","schedule.fcs-get-report")}};async function tt(e=!1){const t=I().model.state,n=t.authStatus.username;if(!n)return;if(!e){if(t.schedule.fcsSetup.checking)return;if(t.schedule.fcsSetup.connected)return}C().fetcher.ignoreCache();const s=await k().igApi.fetchUserPosts(n,50);if(t.authStatus.username!==n)return;const a=(s.result||[]).map((e=>{const t={photo:"photo",video:"video",carousel:"carousel"}[e.type];return t?_().default({id:e.id,source:"ig",type:t,status:"posted",image:e.imgMedium||e.img||e.imgx,preview:e.imgMedium||e.img||e.imgx,imageAvgColor:null,on:e.on,createdOn:e.on,stats:{likes:e.stats.likes,comments:e.stats.comments},crosspostToFb:null,saveStatus:null,draftOrder:null,caption:""}):null})).filter(Boolean);I().transaction((e=>{e.schedule.loading=!1,e.schedule.lastIgPostsUpdateOn=Date.now(),e.schedule.posts=e.schedule.posts.filter((e=>"local"===e.source)).concat(a)}))}M();var nt={init:function(){S().chromeBus.on("overseer.send-report",it)},sendReport:it};const st=["acknowledged","analytics","dm","experiments","followUs","igTask","igView","igtvUpload","insights","multiaccount","rateUs","sidebar","tagAssist","userDetails","welcome",{field:"authStatus",cb:e=>a().default.cloneDeep(e)},{field:"authStatus.cookies",cb:()=>"!sanitized"},{field:"billing",cb:e=>a().default.cloneDeep(e)},{field:"billing.account.token",cb:()=>"!sanitized"},{field:"schedule",cb:e=>{const t=a().default.cloneDeep(e);return t&&t.posts&&(t.posts=t.posts.map((e=>(delete e.image,delete e.preview,e)))),t}},{field:"userStates",cb:()=>"!ignored"},{field:"whatsNew",cb:()=>"!ignored"}],at=new(P().Sender)({urlPrefix:v().env.options.apiUrl});async function it({key:e,filters:t,data:n}={}){if(e=e||"system",n=n||{},(t=t||{}).username||(t.username=D().stateProxy.username()||"unknown"),"string"!=typeof n&&!n.state){const e=I().model.state,t={};st.forEach((n=>{if("string"==typeof n)t[n]=e[n];else{const s=e[n.field];t[n.field]=n.cb(s)}})),n.state=t}"string"==typeof n||n.schedule||(n.schedule=await et.getReport());try{n=JSON.stringify(n)}catch(e){n=e.message}const s={key:e,filters:t,data:n};v().env.is.development&&S().chromeBus.send("popup.log","%coverseer report [background]","color: #c818dc",{key:e,filters:t,data:JSON.parse(n)}),at.send("/overseer",{body:s}).then((t=>{log(`overseer ${e} report of ${n.length} bytes was sent`)})).catch((t=>{error(`! failed sending ${e} overseer report of ${n.length} bytes:`),error(t)}))}I(),k(),S();var ot={getCredibility:function(e,t=null,{forcePrivate:n=!1}={}){const s=e.userId===t;if(e.isPrivate&&!s&&!n)return null;if(e.isVerified)return 1;if("inssistapp"===e.username)return 1;let a=0,i=0;Object.values(rt).forEach((t=>{a+=t.getValue(e)*t.weight,i+=Math.max(t.weight,0)}));const o=e.followingsCount>7e3?.45:e.followingsCount>6500?.4:e.followingsCount>6e3?.35:e.followingsCount>5500?.25:e.followingsCount>5e3?.1:0,r=1-ut(a/i+o);return Math.round(100*r)/100}};const rt={"followings-to-followers-ratio":{weight:150,getValue:function(e){return ut(Math.log2(e.followingsCount/e.followersCount/4)/1.5)}},"short-bio":{weight:30,getValue:function(e){if(!e.bio)return 1;return ut((20-e.bio.length)/20)}},"no-avatar":{weight:100,getValue:function(e){return e.hasAvatar?0:1}},"few-posts":{weight:200,getValue:function(e){return ut((24-e.postsCount)/24)}},"username-ends-with-digits":{weight:100,getValue:function(e){if(!e.username)return 0;const t=e.username.replace(/[_.]*/g,"").match(/.*(\d{4,})$/),n=t&&t[1];if(!n)return 0;const s=Number(n);return s>1950&&s<2030?0:1}},"has-highlights":{weight:-25,getValue:function(e){return e.hasHighlights?1:0}},"has-igtv":{weight:-50,getValue:function(e){return e.hasIgtv?1:0}},"posts-frequency":{weight:150,getValue:function(e){if(e.isPrivate)return 0;const t=e.lastPosts?e.lastPosts.length:0;if(0===t)return 1;const n=Date.now(),s=2592e6,a=e.lastPosts.map((e=>e.ts)).sort();if(a.some((e=>n-e<s)))return 0;let i=0,o=0,r=0;for(;;){if(a[o]-a[i]<s&&o<t?(o++,r=Math.max(r,o-i)):i++,i===t-1)break}return ut((r/t-.6)/.4)}}};function ut(e){return Math.min(Math.max(0,e),1)}const lt=[{condition:e=>e>.85,value:"A",label:"credible",color:"#74BE86"},{condition:e=>e>.7,value:"B",label:"credible",color:"#74BE86"},{condition:e=>e>.55,value:"C",label:"could be spam",color:"#BAD043"},{condition:e=>e>.35,value:"D",label:"likely spam",color:"#FFCC24"},{condition:e=>"number"==typeof e,value:"F",label:"spam / inactive",color:"#E34E21"},{condition:e=>"failed"===e,value:"N/A",label:"check failed",color:"#D8DADD"},{condition:()=>!0,value:"N/A",label:"user is private",color:"#D8DADD"}];var ct={init:async function(){S().chromeBus.on("insights.get-credibility-grade",dt)}};function dt(e){const t=k().igApi.createUserObject(e),n=I().model.state.authStatus.userId;return function(e){const t=lt.find((t=>t.condition(e)));return{value:t.value,label:t.label,color:t.color}}(ot.getCredibility(t,n))}O(),V(),x(),C();const ft=e=>"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e?JSON.stringify(e):e,ht=function(e){console.log(`%c[test] ${ft(e)}`,"color: #3d9d30")},gt=function(e){console.log(`%c[test] ${ft(e)}`,"color: #e94b35")},pt=function(e){console.log(ft(e))},mt={init:function(){window.env=v().env,window.ig=w().ig,window.utils=l().utils,window.callAsync=d().default,window.createUrl=f().default,window.createAlarm=h().default,window.AsyncQueue=X,window.ls=p().default,window.safe=c().default,window.igApi=k().igApi,window.fbApi=oe,window.Response=k().Response,window.IgUsersPage=k().IgUsersPage,window.eventBus=b().eventBus,window.chromeBus=S().chromeBus,window.iframeBus=y().iframeBus,window.abTestingController=V().abTestingController,window.gaController=x().gaController,window.fetcher=C().fetcher,window.billing=pe,window.idbController=O().idbController,window.sentryController=r().sentryController,window.overseerController=nt,window.insightsController=ct,window.setState=this.setState,window.downgradeVersion=this.downgradeVersion,window.testGetSkuDetails=this.testGetSkuDetails,window.testGetPurchases=this.testGetPurchases,window.testFetchUsername=this.testFetchUsername,window.testFetchUserId=this.testFetchUserId,window.testAll=this.testAll,window.errorsDelta=this.errorsDelta,window.activityDelta=this.activityDelta,window.countMadeActions=this.countMadeActions,(v().env.is.development||v().env.is.beta)&&(window.model=I().model,window.transaction=I().transaction,window.storageController=U().storageController,window.stateProxy=D().stateProxy,window.unbanAllTasks=this.unbanAllTasks,Object.assign(window,m()),this.defineCommit())},countMadeActions:function(e=86400){const t=window.__debug.state,n=l().utils.getUnixTime(),s={likes:0};for(let a=0;a<t.stats.activity.length;a++){const i=t.stats.activity[a];if(n-i.on>e)break;"like"===i.type&&s.likes++}return s},errorsDelta:function(){const e=window.__debug.errors;let t=e[0].on;e.forEach((e=>{log((t-e.on)/60),t=e.on}))},activityDelta:function(){const e=window.__debug.state.stats.activity;let t=e[0].on;window.__debug.state.stats.activity=e.map((e=>{const n=t;return t=e.on,{...e,since:Math.floor((n-e.on)/60)}}))},setState:function(e){const t=a().default.cloneDeep(e);D().replaceState.dispatch(t)},downgradeVersion:function(){const e=a().default.cloneDeep(I().model.state);e.version=e.version-1,D().replaceState.dispatch(e)},unbanAllTasks:function(){const e=a().default.cloneDeep(I().model.state);e.stats.activity=e.stats.activity.filter((e=>"ban"!==e.type)),D().replaceState.dispatch(e)},testGetSkuDetails:function(){return ht("billing.getSkuDetails..."),new Promise((e=>{google.payments.inapp.getSkuDetails({parameters:{env:"prod"},success:t=>{ht("  success:"),pt(t),e()},failure:t=>{v().env.is.development&&t&&t.response&&"INVALID_RESPONSE_ERROR"===t.response.errorType?ht("  success:"):gt("  failure:"),pt(t),e()}})}))},testGetPurchases:function(){return ht("billing.getPurchases..."),new Promise((e=>{google.payments.inapp.getPurchases({parameters:{env:"prod"},success:t=>{ht("  success:"),pt(t),e()},failure:t=>{gt("  failure:"),pt(t),e()}})}))},testFetchUsername:function(){return ht("igApi.fetchUsername..."),k().igApi.fetchUsername().then((e=>{ht("  success:"),pt(e)})).catch((e=>{gt("  failure:"),pt(e)}))},testFetchUserId:function(e){return ht("igApi.fetchUserId..."),k().igApi.fetchUserId(e).then((e=>(ht("  success:"),pt(e),e.result))).then((()=>{const e=a().default.cloneDeep(I().model.state);D().replaceState.dispatch(e)})).catch((e=>{gt("  failure:"),pt(e)}))},testAll:function(){new Promise((e=>{setTimeout(e,0)})).then(mt.testGetSkuDetails).then(mt.testGetPurchases).then(mt.testFetchUsername).then(mt.testFetchUserId)},defineCommit:function(){Object.defineProperty(window,"commit",{get:()=>(this.setState(I().model.state),null)})}};d();var vt={init:async function(){await async function(){for(const e of wt){const t=(await d().default(chrome.cookies.getAll,{url:e})).filter((e=>"unspecified"===e.sameSite));await Promise.all(t.map((async t=>{e.startsWith("http://")?await d().default(chrome.cookies.remove,{url:e,name:t.name}):await d().default(chrome.cookies.set,{url:e,name:t.name,value:t.value,domain:t.domain,path:t.path,secure:!0,httpOnly:t.httpOnly,sameSite:"no_restriction",expirationDate:t.expirationDate,storeId:t.storeId})})))}}(),chrome.webRequest.onHeadersReceived.addListener(bt,{urls:wt},Ce.getVersion()<72?["blocking","responseHeaders"]:["blocking","responseHeaders","extraHeaders"])}};const wt=["http://*.instagram.com/*","https://*.instagram.com/*","https://*.facebook.com/*","http://*.doubleclick.net/*"];function bt(e){return e.responseHeaders.forEach((e=>{"set-cookie"===e.name&&-1!==e.value.indexOf("Secure")&&(-1!==e.value.indexOf("SameSite=Strict")?e.value=e.value.replace(/SameSite=Strict/g,"SameSite=None"):-1!==e.value.indexOf("SameSite=Lax")?e.value=e.value.replace(/SameSite=Lax/g,"SameSite=None"):e.value=e.value.replace(/; Secure/g,"; SameSite=None; Secure"))})),{responseHeaders:e.responseHeaders}}function St(e){return e&&e.__esModule?e:{default:e}}I(),j();var yt={},kt={update:function(e){if(!e.userStates)return e;const t={...e,billing:{...e.billing,trial:{...e.billing.trial,dmAdvanced:0}}};return delete t.billing.trial.dmGhost,t}};t(yt,"default",(function(){return kt})),e(yt);var At={},Tt={update:function(e){return{...e,analytics:{...e.analytics,trialLastViewedFollowerId:null,trialLastViewedUnfollowerId:null}}}};t(At,"default",(function(){return Tt})),e(At);var Ct={};O();var It={update:function(e){return async function(){const e=await O().idbController.getAllKeys();for(const t of e)(t.startsWith("schedule.fcs-post-preview:")||t.startsWith("schedule.local-post:"))&&O().idbController.delete(t)}(),e}};t(Ct,"default",(function(){return It})),e(Ct);var Dt={},Ut={update:function(e){return{...e,schedule:{...e.schedule,localPosts:[]}}}};t(Dt,"default",(function(){return Ut})),e(Dt);var Pt={},Ot={update:function(e){return e.userStates?{...e,billing:{...e.billing,trial:{...e.billing.trial,dmAdvanced:Math.max(e.billing.trial.dmAdvanced-50,0)}}}:e}};t(Pt,"default",(function(){return Ot})),e(Pt);var _t={},xt={update:function(e){const t={...e,schedule:{...e.schedule,isSetupPanelShown:!1,setup:{...e.schedule.setup}}};return delete t.schedule.setup.selectedSetupType,t}};t(_t,"default",(function(){return xt})),e(_t);var Et={},Bt={update:function(e){return e.userStates?{...e,zen:{enabled:!1}}:e}};t(Et,"default",(function(){return Bt})),e(Et);var Ft={},Mt={update:function(e){return e.userStates?{...e,billing:{...e.billing,trial:{...e.billing.trial,zen:0}},zen:{...e.zen,lastTrialUpdateOn:null}}:e}};t(Ft,"default",(function(){return Mt})),e(Ft);var Rt={},Ht={update:function(e){return{...e,insights:{...e.insights,lastTaskTimestamps:[]}}}};t(Rt,"default",(function(){return Ht})),e(Rt);var qt={},Lt={update:function(e){return{...e,billing:{...e.billing,trial:{...e.billing.trial,coverAssist:0}},coverAssist:{shown:!1,loading:!0,videoUrl:null,coverUrl:null,selectedTabId:"auto",showGrid:!1,gridImages:[],frameGalleryImages:[],frameGallerySelectedImage:null,frameSelectImage:null,frameSelectValue:null,frameUploadImage:null}}}};t(qt,"default",(function(){return Lt})),e(qt);var Nt={},Vt={update:function(e){return e.userStates?{...e,whatsNew:e.whatsNew.filter((e=>"youtube-giveaway"!==e.id))}:e}};t(Nt,"default",(function(){return Vt})),e(Nt);var jt={},$t={update:function(e){if(!e.userStates)return e;const t={...e.billing.fspring},n={};return t.begin&&(n["inssist-pro-monthly"]={active:t.active,state:t.state,begin:t.begin,next:t.next}),delete t.active,delete t.state,delete t.begin,delete t.next,delete t.sku,{...e,billing:{...e.billing,fspring:t,subscriptions:n,products:{}}}}};t(jt,"default",(function(){return $t})),e(jt);var Gt={},Wt={update:function(e){return e.userStates?{...e,billing:{...e.billing,trial:{...e.billing.trial,addLinkToStory:0}}}:e}};t(Gt,"default",(function(){return Wt})),e(Gt);var zt={},Jt={update:function(e){const t={...e,authStatus:{...e.authStatus,cookies:{ig:{sessionId:e.authStatus.sessionIdCookie},fb:[]}},schedule:{...e.schedule,fcsSetup:{checking:!1,connected:!1,connecting:!1,showPanel:!1,showInstructions:!1,showError:!1}}};return delete t.authStatus.sessionIdCookie,delete t.schedule.setup,delete t.schedule.isVerificationRequired,delete t.schedule.isSetupPanelShown,t}};t(zt,"default",(function(){return Jt})),e(zt);var Kt={},Yt={update:function(e){const t={...e,authStatus:{...e.authStatus,cookies:{...e.authStatus.cookies}}};return delete t.authStatus.cookies.ig,t}};t(Kt,"default",(function(){return Yt})),e(Kt);var Qt={},Xt={update:function(e){return e.userStates?{...e,billing:{...e.billing,trial:{...e.billing.trial,repost:0}}}:e}};t(Qt,"default",(function(){return Xt})),e(Qt);var Zt={},en={update:function(e){return e.userStates?{...e,whatsNew:e.whatsNew.map((e=>{let t;return t="Share Post to Story"===e.header?"v10.0.1":e.subheader,{id:t,acknowledged:e.acknowledged}}))}:e}};t(Zt,"default",(function(){return en})),e(Zt);var tn={};$();var nn={update:function(e){if(!e.userStates)return e;return e.whatsNew.find((e=>"Reposting"===e.id))?{...e,whatsNew:$().default().map((e=>({id:e.id,acknowledged:!0})))}:e}};t(tn,"default",(function(){return nn})),e(tn);var sn={},an={update:function(e){return{...e,schedule:{...e.schedule,recentScheduledOn:null}}}};t(sn,"default",(function(){return an})),e(sn);var on={},rn={update:function(e){return{...e,schedule:{...e.schedule,fcsSetup:{checking:!1,connected:!1,connecting:!1,showPanel:!1,errorCode:null}}}}};t(on,"default",(function(){return rn})),e(on);var un={},ln={update:function(e){if(!e.userStates)return e;const t={...e,billing:{...e.billing,trial:{...e.billing.trial}}};return delete t.billing.trial.multiaccount,t}};t(un,"default",(function(){return ln})),e(un);var cn={},dn={update:function(e){return e.authStatus.cookies?e:{...e,authStatus:{...e.authStatus,cookies:{igSessionId:null,fb:[]}}}}};t(cn,"default",(function(){return dn})),e(cn);var fn={},hn={update:function(e){return{...e,analytics:{...e.analytics,filters:{query:"",accounts:"all"}},insights:{...e.insights,filters:{query:"",accounts:"all",posts:"all"},tasks:e.insights.tasks.map((e=>{const t={...e};return delete t.followersTableSkip,delete t.followingsTableSkip,t}))}}}};t(fn,"default",(function(){return hn})),e(fn);var gn={},pn={update:function(e){return{...e,analytics:{...e.analytics,loading:!1},insights:{...e.insights,loading:!1}}}};t(gn,"default",(function(){return pn})),e(gn);var mn={},vn={update:function(e){if(!e.userStates){const t={...e};return delete t.tagAssist,t}return{...e,tagAssist:{shown:!1,collections:[],loadingTags:[],selectedTags:[],loadedTagData:{},errorCode:null,search:{query:"",loading:!1,relevantTags:[]}}}}};t(mn,"default",(function(){return vn})),e(mn);var wn={},bn={update:function(e){const t={...e,insights:{...e.insights}};return delete t.insights.isReportOpen,delete t.insights.selectedTaskId,e.userStates&&"tab-insights"===e.sidebar.selectedTabId&&(t.sidebar={...e.sidebar,selectedTabId:"tab-analytics"}),t}};t(wn,"default",(function(){return bn})),e(wn);var Sn={},yn={update:function(e){return e.userStates?{...e,whatsNew:e.whatsNew.filter((e=>"earlyadopter-coupon"!==e.id))}:e}};t(Sn,"default",(function(){return yn})),e(Sn);var kn={},An={update:function(e){if(!e.userStates)return e;const t={...e,tagAssist:{...e.tagAssist,query:"",searching:!1,foundTags:[]}};return delete t.tagAssist.search,delete t.tagAssist.loadedTagData,t}};t(kn,"default",(function(){return An})),e(kn);var Tn={},Cn={update:function(e){return e.userStates?{...e,tagAssist:{...e.tagAssist,latinOnly:!1}}:e}};t(Tn,"default",(function(){return Cn})),e(Tn);var In={},Dn={update:function(e){return e.userStates?{...e,tagAssist:{...e.tagAssist,accountStats:{}}}:e}};t(In,"default",(function(){return Dn})),e(In);var Un={},Pn={update:function(e){if(!e.userStates)return e;const t={...e,tagAssist:{...e.tagAssist,relevantTags:[]}};return delete t.tagAssist.foundTags,t}};t(Un,"default",(function(){return Pn})),e(Un);var On={};O();var _n={update:function(e){return e.userStates&&O().idbController.delete("tag-assist.tag-data"),e}};t(On,"default",(function(){return _n})),e(On);var xn={},En={update:function(e){return e.userStates?{...e,tagAssist:{...e.tagAssist,ladderConfig:{lastUpdateOn:Date.now(),tiers:{low:.7,medium:1.5,high:5}}}}:e}};t(xn,"default",(function(){return En})),e(xn);var Bn={},Fn={update:function(e){return e.userStates?{...e,tagAssist:{...e.tagAssist,ladder:null}}:e}};t(Bn,"default",(function(){return Fn})),e(Bn);var Mn={};O();var Rn={update:function(e){return e.userStates&&O().idbController.delete("tag-assist.tag-data"),e}};t(Mn,"default",(function(){return Rn})),e(Mn);var Hn={},qn={update:function(e){return e.userStates?{...e,tagAssist:{...e.tagAssist,selectedTabId:"search"}}:e}};t(Hn,"default",(function(){return qn})),e(Hn);var Ln={},Nn={update:function(e){return e.userStates?{...e,tagAssist:{...e.tagAssist,newCollection:{name:"",text:"",showForm:!1},collections:e.tagAssist.collections.map((e=>({...e,editing:!1,editName:"",editText:""})))}}:e}};t(Ln,"default",(function(){return Nn})),e(Ln);var Vn={},jn={update:function(e){if(!e.userStates)return e;const t={...e,tagAssist:{...e.tagAssist,selectedGroupId:"low",ladderLoadingTags:[],collectionsTagData:{},collectionsLoadingTags:[]}};return delete t.tagAssist.relevantTags,delete t.tagAssist.loadingTags,t}};t(Vn,"default",(function(){return jn})),e(Vn);var $n={},Gn={update:function(e){return e.userStates?{...e,tagAssist:{...e.tagAssist,engagementSort:null}}:e}};t($n,"default",(function(){return Gn})),e($n);var Wn={},zn={update:function(e){return e.userStates?{...e,tagAssist:{...e.tagAssist,lastDayUsedOn:null},billing:{...e.billing,trial:{...e.billing.trial,tagAssist:0}}}:e}};t(Wn,"default",(function(){return zn})),e(Wn);var Jn={},Kn={update:function(e){if(!e.userStates)return e;const t=e.billing.trial;return{...e,billing:{...e.billing,trial:{...t,installedOn:t.installedOn||Date.now(),dmAdvanced:t.dmAdvanced||0,schedule:t.schedule||0,insights:t.insights||0,analytics:t.analytics||0,zen:t.zen||0,coverAssist:t.coverAssist||0,tagAssist:t.tagAssist||0,addLinkToStory:t.addLinkToStory||0,postsPublished:t.postsPublished||0,storiesPublished:t.storiesPublished||0,dmsSent:t.dmsSent||0,repost:t.repost||0}}}}};t(Jn,"default",(function(){return Kn})),e(Jn);var Yn={},Qn={update:function(e){if(!e.userStates)return e;const t={...e,tagAssist:{...e.tagAssist,ladderEngagementSort:e.tagAssist.engagementSort,summaryEngagementSort:null}};return delete t.tagAssist.engagementSort,t}};t(Yn,"default",(function(){return Qn})),e(Yn);var Xn={},Zn={update:function(e){return e.userStates?{...e,tagAssist:{...e.tagAssist,preselectedTags:[],preselectedText:""}}:e}};t(Xn,"default",(function(){return Zn})),e(Xn);var es={},ts={update:function(e){return{...e,reels:{supported:!1}}}};t(es,"default",(function(){return ts})),e(es);var ns={},ss={update:function(e){return e.userStates?{...e,billing:{...e.billing,trial:{...e.billing.trial,reels:0}}}:e}};t(ns,"default",(function(){return ss})),e(ns);var as={},is={update:function(e){return{...e,reels:{...e.reels,creating:!1}}}};t(as,"default",(function(){return is})),e(as);var os={},rs={update:function(e){return{...e,authStatus:{...e.authStatus,isMobileSession:!1}}}};t(os,"default",(function(){return rs})),e(os);var us={},ls={update:function(e){return e.userStates?{...e,billing:{...e.billing,recentFeature:null}}:e}};t(us,"default",(function(){return ls})),e(us);var cs={},ds={update:function(e){const t={...e,schedule:{...e.schedule,loading:!1}};return delete t.schedule.isRefreshingGrid,t}};t(cs,"default",(function(){return ds})),e(cs);var fs={},hs={update:function(e){const t={...e,schedule:{...e.schedule,navigation:{...e.schedule.navigation}}};return delete t.schedule.navigation.fcsTitle,t}};t(fs,"default",(function(){return hs})),e(fs);var gs={},ps={update:function(e){return{...e,schedule:{...e.schedule,filters:{...e.schedule.filters,mediaTypes:e.schedule.filters.mediaTypes.filter((e=>"igtv"!==e))}}}}};t(gs,"default",(function(){return ps})),e(gs);var ms={},vs={update:function(e){const t={...e,schedule:{...e.schedule,posts:[...e.schedule.localPosts.map((e=>({id:e.id,source:"local",type:e.type,status:"draft",image:e.image,preview:null,imageAvgColor:e.imageAverageColor,on:e.on,createdOn:Date.now(),stats:null,crosspostToFb:null,draftOrder:e.draftOrder}))),...e.schedule.fcsPosts.map((e=>({id:e.id,source:"fcs",type:e.type,status:e.status,image:e.image,preview:e.preview,imageAvgColor:e.imageAverageColor,on:e.on,stats:e.stats?{...e.stats}:null,crosspostToFb:e.crosspostToFb,draftOrder:e.draftOrder})))]}};return delete t.schedule.igPosts,delete t.schedule.fcsPosts,delete t.schedule.localPosts,t}};t(ms,"default",(function(){return vs})),e(ms);var ws={},bs={update:function(e){const t={...e,schedule:{...e.schedule}};if(e.userStates){const n=[e,...Object.values(e.userStates)];t.acknowledged={...e.acknowledged,scheduleDndTip:n.some((e=>e.schedule.isDndTipAcknowledged))?Date.now():-1}}return delete t.schedule.isDndTipAcknowledged,t}};t(ws,"default",(function(){return bs})),e(ws);var Ss={},ys={update:function(e){return e.userStates?{...e,installedEventSent:!0,tagAssist:{...e.tagAssist,tagMetricsUpsellDismissed:!1}}:e}};t(Ss,"default",(function(){return ys})),e(Ss);var ks={},As={update:function(e){if(!e.userStates)return e;const t={...e,tagAssist:{...e.tagAssist,igSelectedTags:[...e.tagAssist.selectedTags],fcsSelectedTags:[],sidebarSelectedTags:[...e.tagAssist.preselectedTags],sidebarSelectedTagsAsText:[...e.tagAssist.preselectedText]}};return delete t.tagAssist.selectedTags,delete t.tagAssist.preselectedTags,delete t.tagAssist.preselectedText,t}};t(ks,"default",(function(){return As})),e(ks);var Ts={},Cs={update:function(e){return{...e,schedule:{...e.schedule,showTagAssist:!1}}}};t(Ts,"default",(function(){return Cs})),e(Ts);var Is={},Ds={update:function(e){const t={...e,reels:{...e.reels}};return delete t.reels.supported,t}};t(Is,"default",(function(){return Ds})),e(Is);var Us={},Ps={update:function(e){return chrome.alarms.clearAll(),{...e,analytics:{...e.analytics,scheduleDay:-1,scheduleHour:21}}}};t(Us,"default",(function(){return Ps})),e(Us);var Os={},_s={update:function(e){let t;if(e.userStats){delete{...e,billing:{...e.billing,trial:{...e.billing.trial}}}.billing.trial.zen}else t={...e,zen:{...e.zen}},delete t.zen.lastTrialUpdateOn;return t}};t(Os,"default",(function(){return _s})),e(Os);var xs={},Es={update:function(e){return e.userStats?{...e,tagAssist:{...e.tagAssist,lastTagScanOn:null}}:e}};t(xs,"default",(function(){return Es})),e(xs);var Bs={},Fs={update:function(e){return{...e,schedule:{...e.schedule,filters:{showInfo:e.schedule.filters.showInfo,photo:e.schedule.filters.mediaTypes.includes("photo"),video:e.schedule.filters.mediaTypes.includes("video"),carousel:e.schedule.filters.mediaTypes.includes("carousel"),posted:e.schedule.filters.statuses.includes("posted"),local:e.schedule.filters.statuses.includes("local"),draft:e.schedule.filters.statuses.includes("draft"),scheduled:e.schedule.filters.statuses.includes("scheduled")}}}}};t(Bs,"default",(function(){return Fs})),e(Bs);var Ms={},Rs={update:function(e){const t={...e,schedule:{...e.schedule,fileUploadErrors:[...e.schedule.bulkUploadErrors]}};return delete t.schedule.bulkUploadErrors,t}};t(Ms,"default",(function(){return Rs})),e(Ms);var Hs={},qs={update:function(e){const t={...e,schedule:{...e.schedule,addCardAttention:!1}};return delete t.schedule.gridAddCardAttention,t}};t(Hs,"default",(function(){return qs})),e(Hs);var Ls={},Ns={update:function(e){const t={...e,schedule:{...e.schedule,addCard:{saved:!1,fileCount:0,attention:e.schedule.addCardAttention,draggingFiles:!1,selectedOption:"multiple"}}};return delete t.schedule.addCardAttention,t}};t(Ls,"default",(function(){return Ns})),e(Ls);var Vs={},js={update:function(e){return{...e,bulk:{saving:!1,selectedPostIds:[],actions:{}}}}};t(Vs,"default",(function(){return js})),e(Vs);var $s={},Gs={update:function(e){return{...e,bulk:{...e.bulk,activeActionId:null}}}};t($s,"default",(function(){return Gs})),e($s);var Ws={},zs={update:function(e){return{...e,bulk:{...e.bulk,dateDialog:{selectedTypeId:"interval",calendar:{periodStart:null,selectedDay:null,selectedSlotTime:null,customTime:null,timezone:null,isTimeError:!1},interval:{frequency:"1:1",timeListetuser:[{selectedSlotTime:null,customTime:null}]},week:{selectedDays:[],selectedSlotTime:null,customTime:null}}}}}};t(Ws,"default",(function(){return zs})),e(Ws);var Js={},Ks={update:function(e){const t={...e,bulk:{...e.bulk,dateDialog:{show:!1,...e.bulk.dateDialog,calendar:{...e.bulk.dateDialog.calendar,errorMessage:null}}}};return delete t.bulk.dateDialog.calendar.isTimeError,t}};t(Js,"default",(function(){return Ks})),e(Js);var Ys={},Qs={update:function(e){return{...e,bulk:{...e.bulk,dateDialog:{...e.bulk.dateDialog,week:{...e.bulk.dateDialog.week,dayErrorMessage:null,timeErrorMessage:null},timeSlots:{errorMessage:null}}}}}};t(Ys,"default",(function(){return Qs})),e(Ys);var Xs={},Zs={update:function(e){return{...e,schedule:{...e.schedule,isDraggingPost:!1}}}};t(Xs,"default",(function(){return Zs})),e(Xs);var ea={},ta={update:function(e){return{...e,schedule:{...e.schedule,addCard:{...e.schedule.addCard,savingTitle:null,savingText:null}}}}};t(ea,"default",(function(){return ta})),e(ea);var na={},sa={update:function(e){const t={...e,schedule:{...e.schedule}};return delete t.schedule.hasUncommitedChanges,delete t.schedule.tasks,t}};t(na,"default",(function(){return sa})),e(na);var aa={},ia={update:function(e){return{...e,schedule:{...e.schedule,addCard:{...e.schedule.addCard,savingPreview:null}}}}};t(aa,"default",(function(){return ia})),e(aa);var oa={},ra={update:function(e){return{...e,bulk:{...e.bulk,startingDay:{selectedTypeId:"today",periodStart:null,selectedDay:null}}}}};t(oa,"default",(function(){return ra})),e(oa);var ua={},la={update:function(e){const t={...e,dm:{...e.dm}};return delete t.dm.supported,t}};t(ua,"default",(function(){return la})),e(ua);var ca={},da={update:function(e){return{...e,dm:{...e.dm,ghostModeEnabled:!0}}}};t(ca,"default",(function(){return da})),e(ca);var fa={};O();var ha={update:function(e){const t={...e};return delete t.analytics,delete t.insights,async function(){const e=await O().idbController.getAllKeys();for(const t of e)(t.startsWith("insights.")||t.startsWith("block:analytics:"))&&O().idbController.delete(t)}(),t}};t(fa,"default",(function(){return ha})),e(fa);var ga={},pa={update:function(e){return{...e,schedule:{...e.schedule,fcsSetup:{...e.schedule.fcsSetup,newApi:!0,flipApiOnFail:!1}}}}};t(ga,"default",(function(){return pa})),e(ga);var ma={},va={update:function(e){const t={...e,schedule:{...e.schedule,fcsSetup:{...e.schedule.fcsSetup,attempted:!1,failed:!1}}};return delete t.schedule.fcsSetup.flipApiOnFail,t}};t(ma,"default",(function(){return va})),e(ma);var wa={},ba={update:function(e){const t={...e};return t.userStates||delete t.sidebar,t}};t(wa,"default",(function(){return ba})),e(wa);var Sa={},ya={update:function(e){return e.igView?{...e,igView:{...e.igView,fullscreenWidth:460,withBorder:!0}}:e}};t(Sa,"default",(function(){return ya})),e(Sa);var ka={},Aa={update:function(e){const t={...e,analytics:{...e.analytics,runAutomatically:!0,runningJobId:null,lastScanOn:null,nextScanOn:null,error:null,isReportOpen:!0,selectedCard:"nFollowers"},ff:{isActionBlockShown:!1,followStatus:{}}};return delete t.insights.isActionBlockShown,t}};t(ka,"default",(function(){return Aa})),e(ka);var Ta={},Ca={update:function(e){const t={...e,igTask:e.ff};return delete t.ff,t}};t(Ta,"default",(function(){return Ca})),e(Ta);var Ia={},Da={update:function(e){return{...e,igTask:{...e.igTask,likeStatus:{}}}}};t(Ia,"default",(function(){return Da})),e(Ia);var Ua={},Pa={update:function(e){const t={...e,igTask:{...e.igTask,actionBlockCode:null}};return delete t.igTask.isActionBlockShown,t}};t(Ua,"default",(function(){return Pa})),e(Ua);var Oa={},_a={update:function(e){return e.userStates?e:{...e,authStatus:{userId:null,username:null,avatarUrl:null,sessionIdCookie:null,isLoggedIn:!1}}}};t(Oa,"default",(function(){return _a})),e(Oa);var xa={},Ea={update:function(e){return e.userStates?{...e,multiaccount:{userIds:e.authStatus.isLoggedIn?[e.authStatus.userId]:[],addingNewAccount:!1}}:e}};t(xa,"default",(function(){return Ea})),e(xa);var Ba={},Fa={update:function(e){if(!e.userStates)return e;const t=e.multiaccount.userIds;return{...e,multiaccount:{...e.multiaccount,selectedUserId:t.length?t[t.length-1]:null}}}};t(Ba,"default",(function(){return Fa})),e(Ba);var Ma={},Ra={update:function(e){return e.userStates?{...e,igView:{...e.igView,creationCardShown:!1}}:e}};t(Ma,"default",(function(){return Ra})),e(Ma);var Ha={},qa={update:function(e){return e.userStates?{...e,billing:{...e.billing,recordedUsernames:[]}}:e}};t(Ha,"default",(function(){return qa})),e(Ha);var La={},Na={update:function(e){const t={...e,schedule:{...e.schedule,setup:{...e.schedule.setup,stepIndex:null,stepTitle:null}}};return delete t.schedule.setup.progress,t}};t(La,"default",(function(){return Na})),e(La);var Va={},ja={update:function(e){return e.userStates?{...e,followUs:{shown:!1,acknowledged:!1}}:e}};t(Va,"default",(function(){return ja})),e(Va);var $a={},Ga={update:function(e){if(!e.userStates)return e;const t={...e,acknowledged:{...e.acknowledged},rateUs:{shown:!1,acknowledged:-1!==e.acknowledged.rateUs}};return delete t.acknowledged.rateUs,t}};t($a,"default",(function(){return Ga})),e($a);var Wa={},za={update:function(e){if(!e.userStates)return e;const t=Date.now(),n={...e,acknowledged:{...e.acknowledged,rateUs:e.rateUs.acknowledged?t:-1,followUs:e.followUs.acknowledged?t:-1},rateUs:{...e.rateUs},followUs:{...e.followUs}};return delete n.rateUs.acknowledged,delete n.followUs.acknowledged,n}};t(Wa,"default",(function(){return za})),e(Wa);var Ja={},Ka={update:function(e){if(!e.userStates)return e;const t={...e,userDetails:{}};return delete t.billing.promostory.followersCount,t}};t(Ja,"default",(function(){return Ka})),e(Ja);var Ya={},Qa={update:function(e){if(!e.userStates)return e;const t={...e,acknowledged:{...e.acknowledged}};return delete t.acknowledged.postLimitations,t}};t(Ya,"default",(function(){return Qa})),e(Ya);var Xa={},Za={update:function(e){return e}};t(Xa,"default",(function(){return Za})),e(Xa);var ei={},ti={update:function(e){return{...e,schedule:{...e.schedule,fcsPosts:e.schedule.fcsPosts.map((e=>{const t={...e};return delete t.firstMediaId,t}))}}}};t(ei,"default",(function(){return ti})),e(ei);var ni={},si={update:function(e){return{...e,schedule:{...e.schedule,drafts:[]}}}};t(ni,"default",(function(){return si})),e(ni);var ai={},ii={update:function(e){const t={...e,dm:{...e.dm,ghostModeEnabled:!1,ghostModeFailed:!1}};return delete t.dm.showBadge,t}};t(ai,"default",(function(){return ii})),e(ai);var oi={},ri={update:function(e){const t={...e,schedule:{...e.schedule,filters:{...e.schedule.filters,statuses:[...e.schedule.filters.statuses,"local"]}}};return delete t.dm.showBadge,t}};t(oi,"default",(function(){return ri})),e(oi);var ui={};O();var li={update:function(e){const t={...e,schedule:{...e.schedule,localPosts:e.schedule.drafts}};return delete t.schedule.drafts,async function(){let e;try{e=await O().idbController.getAllKeys()}catch(e){return}for(const t of e){if(!t.startsWith("schedule.drafts:"))continue;const e=t.replace("schedule.drafts:",""),n=await O().idbController.get(t);O().idbController.set(`schedule.local-posts:${e}`,n),O().idbController.delete(t)}}(),t}};t(ui,"default",(function(){return li})),e(ui);var ci={};O();var di={update:function(e){return async function(){let e;try{e=await O().idbController.getAllKeys()}catch(e){return}for(const t of e)(t.startsWith("schedule.drafts:")||t.startsWith("schedule.local-posts:"))&&O().idbController.delete(t)}(),{...e,schedule:{...e.schedule,bulkUploadErrors:[]}}}};t(ci,"default",(function(){return di})),e(ci);var fi={},hi={update:function(e){return{...e,schedule:{...e.schedule,localPosts:[]}}}};t(fi,"default",(function(){return hi})),e(fi);var gi={};c(),O();var pi={update:function(e){return async function(){const e=await c().default((()=>O().idbController.getAllKeys()),[]);for(const t of e)t.startsWith("schedule.local-posts:")&&O().idbController.delete(t)}(),{...e,schedule:{...e.schedule,localPosts:[]}}}};t(gi,"default",(function(){return pi})),e(gi);var mi={},vi={update:function(e){const t={...e,schedule:{...e.schedule}};return delete t.schedule.csPosts,delete t.schedule.csError,delete t.schedule.csFailed,delete t.schedule.lastCsPostsUpdateOn,delete t.schedule.navigation.csTitle,delete t.schedule.navigation.isCsLoading,delete t.schedule.setup.isCsConnected,t}};t(mi,"default",(function(){return vi})),e(mi);var wi={},bi={update:function(e){if(!e.userStates)return e;const t={...e,billing:{...e.billing,trial:{...e.billing.trial,dmGhost:0,schedule:0,insights:0,analytics:0,multiaccount:0}}};return delete t.billing.promostory,t}};t(wi,"default",(function(){return bi})),e(wi);var Si={},yi={update:function(e){const t={...e,insights:{...e.insights}};return delete t.insights.availability,t}};t(Si,"default",(function(){return yi})),e(Si);const ki={"version-100":St(yt).default,"version-101":St(At).default,"version-102":St(Ct).default,"version-103":St(Dt).default,"version-104":St(Pt).default,"version-105":St(_t).default,"version-106":St(Et).default,"version-107":St(Ft).default,"version-108":St(Rt).default,"version-109":St(qt).default,"version-110":St(Nt).default,"version-111":St(jt).default,"version-112":St(Gt).default,"version-113":St(zt).default,"version-114":St(Kt).default,"version-115":St(Qt).default,"version-116":St(Zt).default,"version-117":St(tn).default,"version-118":St(sn).default,"version-119":St(on).default,"version-120":St(un).default,"version-121":St(cn).default,"version-122":St(fn).default,"version-123":St(gn).default,"version-124":St(mn).default,"version-125":St(wn).default,"version-126":St(Sn).default,"version-127":St(kn).default,"version-128":St(Tn).default,"version-129":St(In).default,"version-130":St(Un).default,"version-131":St(On).default,"version-132":St(xn).default,"version-133":St(Bn).default,"version-134":St(Mn).default,"version-135":St(Hn).default,"version-136":St(Ln).default,"version-137":St(Vn).default,"version-138":St($n).default,"version-139":St(Wn).default,"version-140":St(Jn).default,"version-141":St(Yn).default,"version-142":St(Xn).default,"version-143":St(es).default,"version-144":St(ns).default,"version-145":St(as).default,"version-146":St(os).default,"version-147":St(us).default,"version-148":St(cs).default,"version-149":St(fs).default,"version-150":St(gs).default,"version-151":St(ms).default,"version-152":St(ws).default,"version-153":St(Ss).default,"version-154":St(ks).default,"version-155":St(Ts).default,"version-156":St(Is).default,"version-157":St(Us).default,"version-158":St(Os).default,"version-159":St(xs).default,"version-160":St(Bs).default,"version-161":St(Ms).default,"version-162":St(Hs).default,"version-163":St(Ls).default,"version-164":St(Vs).default,"version-165":St($s).default,"version-166":St(Ws).default,"version-167":St(Js).default,"version-168":St(Ys).default,"version-169":St(Xs).default,"version-170":St(ea).default,"version-171":St(na).default,"version-172":St(aa).default,"version-173":St(oa).default,"version-174":St(ua).default,"version-175":St(ca).default,"version-176":St(fa).default,"version-177":St(ga).default,"version-178":St(ma).default,"version-71":St(wa).default,"version-72":St(Sa).default,"version-73":St(ka).default,"version-74":St(Ta).default,"version-75":St(Ia).default,"version-76":St(Ua).default,"version-77":St(Oa).default,"version-78":St(xa).default,"version-79":St(Ba).default,"version-80":St(Ma).default,"version-81":St(Ha).default,"version-82":St(La).default,"version-83":St(Va).default,"version-84":St($a).default,"version-85":St(Wa).default,"version-86":St(Ja).default,"version-87":St(Ya).default,"version-88":St(Xa).default,"version-89":St(ei).default,"version-90":St(ni).default,"version-91":St(ai).default,"version-92":St(oi).default,"version-93":St(ui).default,"version-94":St(ci).default,"version-95":St(fi).default,"version-96":St(gi).default,"version-97":St(mi).default,"version-98":St(wi).default,"version-99":St(Si).default},Ai={versioners:{},init:function(){const e=/version-(\d+)/i;Object.keys(ki).map((t=>{const n=parseInt(t.match(e)[1]);return{key:t,version:n}})).sort(((e,t)=>e.version-t.version)).forEach((e=>{this.versioners[e.version]=ki[e.key]}))},update:function(e){let t=e,n=t.version||0;log(`versioner: model version is ${n}`);const s=j().default().version;for(;n<s;){log(`versioner: applying versioner ${n+1}`);const e=this.versioners[n+1];t=e.update(t),t.version=n+1;const s=t.backups||t.userStates;for(const t in s){const a=s[t];try{s[t]=e.update(a),s[t].version=n+1}catch(e){delete s[t]}}n++}return t}};Ai.init(),$();const Ti=function(e){const t=Array.isArray(e.whatsNew)?e.whatsNew:[],n=$().default();let s=!1;const a=n.map((e=>{let n;if(s)n=!0;else{const a=t.find((t=>t.id===e.id));n=a&&a.acknowledged||!1,n&&(s=!0)}return{id:e.id,acknowledged:n}}));return{...e,whatsNew:a}};I(),j(),G();var Ci=I().action("state.setup-default-state",(e=>e.whatsNew?e:{...j().default(),...G().default()}));W();const Ii={init:function(){Ci.dispatch(),this._update()},_update:function(){let e=I().model.state;e=Ai.update(e),e=Ti(e),e!==I().model.state&&W().default.dispatch(e)}};U(),I();const Di={status:null,init:function(){this._subscribeToInflux()},_subscribeToInflux:function(){I().model.observe((e=>e.whatsNew.some((e=>!e.acknowledged))?"updated":"normal"),(e=>{this._updateBadge(e)}))},_updateBadge:function(e){this.status!==e&&chrome.browserAction.setIcon({path:{48:`img/icon-badge-48-${e}.png`}})}};x(),V();var Ui={init:function(){chrome.runtime.setUninstallURL("https://forms.gle/L6nZ8YUTqUspM34s7")}};I();const Pi={init:function(){this._goOnline=this._goOnline.bind(this),this._goOffline=this._goOffline.bind(this),this._recoverIfOffline=this._recoverIfOffline.bind(this),window.addEventListener("online",this._goOnline,!1),window.addEventListener("offline",this._goOffline,!1),setInterval(this._recoverIfOffline,3e5)},_goOnline:function(){log("starter: going online"),null===I().model.state.authStatus.userId&&Re.updateUser()},_goOffline:function(){log("starter: going offline"),null!==I().model.state.authStatus.userId&&Re.updateUser()},_recoverIfOffline:function(){null===I().model.state.authStatus.userId&&(log("starter: trying to recover from offline"),Re.updateUser())}};I(),D(),w();const Oi=new X(w().sleepTimes.action);var _i={init:async function(){log("ig-task: initialisation succeeded"),I().model.observe((()=>D().stateProxy.userId()),(()=>Oi.cleanup()),!1)}};w();new X(w().sleepTimes.peers);d(),z(),I(),S();var xi={init:function(){z().default("open-in-inssist",(async e=>{const t=await d().default(chrome.windows.getLastFocused),n=await d().default(chrome.tabs.getSelected,t.id);!async function(e){const t=Number(localStorage.getItem("last-tab-id")),n=await d().default(chrome.tabs.get,t),s=e.startsWith("/direct/")&&"/direct/"!==e;s?I().transaction((e=>{e.sidebar.isOpen=!0,e.sidebar.selectedTabId="tab-dm"})):I().transaction((e=>{e.sidebar.isOpen=!1}));n?(chrome.windows.update(n.windowId,{focused:!0}),chrome.tabs.update(n.id,{active:!0}),s||S().chromeBus.send("iframe-bus","ig.ajax-go",e)):(s||localStorage.setItem("instagram-iframe-path",e),chrome.tabs.create({url:"https://app.inssist.com",active:!0}))}(e.value),await d().default(chrome.tabs.remove,n.id)}))}};p(),m(),v(),C(),S(),J(),K();var Ei={init:function(){S().chromeBus.on("fusion.check-new-version",Ri),S().chromeBus.on("fusion.popup-tab-id",(e=>{Bi=e})),J().resetController.onReset(Mi),chrome.tabs.onRemoved.addListener((e=>{e===Bi&&Fi&&Hi()})),S().chromeBus.on("fusion.update-now-click",(()=>{p().default.set("fusion.reload-popup-on-background-start",!0),Hi()})),p().default.get("fusion.reload-popup-on-background-start")&&(p().default.remove("fusion.reload-popup-on-background-start"),S().chromeBus.send("fusion.reload-popup")),chrome.alarms.onAlarm.addListener((async e=>{"fusion.refresh-config"===e.name&&Ri()})),chrome.alarms.create("fusion.refresh-config",{when:Date.now(),periodInMinutes:1440})}};let Bi,Fi;function Mi(){p().default.remove("fusion.last-check-on")}async function Ri(){const e=15*m().MINUTE,t=Number(p().default.get("fusion.last-check-on"));if(t&&Date.now()<t+e)return;p().default.set("fusion.last-check-on",Date.now());const n=K().default(),s=`${v().env.options.apiUrl}/fusion?version=${n.version}`;C().fetcher.ignoreCache();const a=(await C().fetcher.fetchText(s,{credentials:"omit"})).replace(/&amp;/g,"&").replace(/&#34;/g,'\\"').replace(/&#39/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">"),i=JSON.parse(a);if(!i.config)return;const o=JSON.parse(JSON.stringify(n));Fi=qi(o,i.config);chrome.extension.getViews({type:"tab"}).length>0?S().chromeBus.send("fusion.new-version-available"):Hi()}function Hi(){Fi&&(p().default.set("fusion.config",Fi),location.reload())}function qi(e,t){for(const n in t)Z(e[n])&&Z(t[n])?qi(e[n],t[n]):e[n]=t[n];return e}h(),m(),v(),k(),I(),Y(),Q();var Li={init:function(){I().model.observe((e=>e.authStatus.userId),(()=>{Ni()})),h().default("tag-assist.update-account-stats",{period:4*m().HOUR},(()=>{Ni()}))}};async function Ni(e=0){const t=I().model.state,n=t.authStatus.userId;if(!n)return;const s=Date.now(),a=Q().default.getAccountStats(),i=a&&s-a.lastScanOn;if(i&&i<v().env.options.tagAssist.accountStatsTtl)return;const o=t.authStatus.username,r=await k().igApi.fetchUserPosts(o,42);if(r.error)return e<2?void Ni(e+1):void console.error("failed to update account stats");const u=r.result;let l=0,c=0;for(const e of u)l+=k().igApi.normalizePostStat24h(e.stats.likes,e.on),c+=k().igApi.normalizePostStat24h(e.stats.comments,e.on);u.length>0&&(l=Math.round(l/u.length),c=Math.round(c/u.length));const d=Y().sortByFrequency(u.map((e=>e.caption||"")).map((e=>Y().extractTags(e,!0))));I().transaction((e=>{e.tagAssist.accountStats[n]={avgLikes:l,avgComments:c,mostUsedTags:d.slice(0,3),lastScanOn:Date.now()}}))}var Vi={init:function(){Li.init()}};m(),d(),z(),S(),D(),x(),I(),z();var ji={init:function(){z().default("desktop-reels.drop-session",(async()=>{chrome.cookies.remove({url:"https://www.instagram.com",name:"sessionid"}),chrome.cookies.remove({url:"https://www.instagram.com",name:"ds_user_id"})}))}};var $i={init:function(){ji.init(),S().chromeBus.on("desktop-reels.get-initial-data",Gi),z().default("desktop-reels.open-billing",Wi),z().default("desktop-reels.submit-success",zi),z().default("desktop-reels.get-initial-data",Ji)}};function Gi(){return{hasPro:D().stateProxy.hasPro(),freeReels:Math.max(0,2-I().model.state.billing.trial.reels),maxFreeReels:2,isMobileSession:I().model.state.authStatus.isMobileSession}}async function Wi(e){const t=await d().default(chrome.windows.getLastFocused),n=await d().default(chrome.tabs.getSelected,t.id);chrome.tabs.create({url:"https://app.inssist.com",active:!0}),I().transaction((e=>{e.sidebar.isOpen=!0,e.sidebar.selectedTabId="tab-billing",e.billing.recentFeature="desktop-reels"})),e.value.includes("keep-ig-tab")||await d().default(chrome.tabs.remove,n.id)}async function zi(){x().gaController.sendEvent("user","reels:submit","desktop"),D().stateProxy.hasProPaid()?x().gaController.sendEvent("user","pro-paid-usage:reels","desktop"):I().transaction((e=>{e.billing.trial.reels+=1}))}function Ji(){chrome.cookies.set({name:"desktop-reels.initial-data",value:JSON.stringify(Gi()),url:"https://www.instagram.com",path:"/",httpOnly:!1,secure:!1,storeId:"0",domain:"instagram.com",sameSite:"strict",expirationDate:Date.now()+30*m().SECOND})}!async function(){window._=a().default,i().polyfillsController.init();const e=Ce.getVersion();console.log(`chrome version is: ${e}`),o().logController.init(),await vt.init(),r().sentryController.init({dsn:"https://bea0900834f541bca8157710f7fd31fe@sentry.io/1547551"}),u().i18nController.init(),De.init(),Ee.init(),V().abTestingController.init(),Ui.init(),await U().synchController.init("background",!0),Ii.init(),me.init(),nt.init(),mt.init(),_i.init(),ct.init(),et.init(),xi.init(),Ei.init(),we.init(),Vi.init(),$i.init(),x().gaController.init().sendPageview().sendInstall(),Re.init(),await Re.updateUser(),pe.init(),await pe.updatePro(),Di.init(),Pi.init(),window._backgroundReady=!0}()}();